# Phone Manager Backend - Environment Configuration
# Copy this file to .env and update values for your environment
# All variables use PM__ prefix with double underscore as separator

# =============================================================================
# DOCKER COMPOSE CONFIGURATION
# =============================================================================

# PostgreSQL credentials (for docker-compose)
POSTGRES_USER=phone_manager
POSTGRES_PASSWORD=phone_manager_dev
POSTGRES_DB=phone_manager
POSTGRES_PORT=5432

# API port mapping
API_PORT=8080

# Logging configuration
LOG_LEVEL=info
LOG_FORMAT=json

# Enable Rust backtraces (1 = enabled, 0 = disabled)
RUST_BACKTRACE=0

# =============================================================================
# DATABASE (REQUIRED)
# =============================================================================

# PostgreSQL connection URL (REQUIRED)
# Format: postgres://user:password@host:port/database
# For local development without Docker:
PM__DATABASE__URL=postgres://postgres:postgres@localhost:5432/phone_manager
# For Docker Compose (uses internal network):
# PM__DATABASE__URL=postgres://phone_manager:phone_manager_dev@postgres:5432/phone_manager

# Connection pool settings (optional)
# PM__DATABASE__MAX_CONNECTIONS=20
# PM__DATABASE__MIN_CONNECTIONS=5
# PM__DATABASE__CONNECT_TIMEOUT_SECS=10
# PM__DATABASE__IDLE_TIMEOUT_SECS=600

# =============================================================================
# SERVER
# =============================================================================

# Server host (default: 0.0.0.0)
# PM__SERVER__HOST=0.0.0.0

# Server port (default: 8080)
# PM__SERVER__PORT=8080

# Request timeout in seconds (default: 30)
# PM__SERVER__REQUEST_TIMEOUT_SECS=30

# Maximum request body size in bytes (default: 1048576 = 1MB)
# PM__SERVER__MAX_BODY_SIZE=1048576

# =============================================================================
# LOGGING
# =============================================================================

# Log level: trace, debug, info, warn, error (default: info)
# PM__LOGGING__LEVEL=info

# Log format: json (production) or pretty (development) (default: json)
# PM__LOGGING__FORMAT=pretty

# =============================================================================
# SECURITY
# =============================================================================

# CORS allowed origins (comma-separated, empty = allow all)
# PM__SECURITY__CORS_ORIGINS=https://example.com,https://app.example.com

# Rate limit per minute per API key (default: 100)
# PM__SECURITY__RATE_LIMIT_PER_MINUTE=100

# =============================================================================
# LIMITS
# =============================================================================

# Maximum devices per group (default: 20)
# PM__LIMITS__MAX_DEVICES_PER_GROUP=20

# Maximum locations per batch upload (default: 50)
# PM__LIMITS__MAX_BATCH_SIZE=50

# Location data retention in days (default: 30)
# PM__LIMITS__LOCATION_RETENTION_DAYS=30

# Maximum length of device display name (default: 50)
# PM__LIMITS__MAX_DISPLAY_NAME_LENGTH=50

# Maximum length of group ID (default: 50)
# PM__LIMITS__MAX_GROUP_ID_LENGTH=50

# =============================================================================
# FRONTEND STATIC FILE SERVING
# =============================================================================

# Enable frontend static file serving (default: false)
FRONTEND_ENABLED=false

# Hostname for staging environment (requests with this Host header serve staging)
# FRONTEND_STAGING_HOSTNAME=admin-staging.example.com

# Hostname for production environment (requests with this Host header serve production)
# FRONTEND_PRODUCTION_HOSTNAME=admin.example.com

# Default environment when hostname doesn't match (default: production)
# FRONTEND_DEFAULT_ENVIRONMENT=production

# Direct PM__ variables (alternative to above)
# PM__FRONTEND__ENABLED=true
# PM__FRONTEND__BASE_DIR=/app/frontend
# PM__FRONTEND__STAGING_HOSTNAME=admin-staging.example.com
# PM__FRONTEND__PRODUCTION_HOSTNAME=admin.example.com
# PM__FRONTEND__DEFAULT_ENVIRONMENT=production
# PM__FRONTEND__IMMUTABLE_CACHE_MAX_AGE=31536000
# PM__FRONTEND__MUTABLE_CACHE_MAX_AGE=60
